# DO NOT EDIT — Auto-generated by overstory
# This overlay was written by `overstory sling`. Manual edits will be
# overwritten on the next spawn. Modify the template at
# templates/overlay.md.tmpl in the overstory repo instead.

## Your Assignment

- **Agent Name:** builder-metrics
- **Task ID:** overstory-5y26
- **Spec:** /dev/stdin
- **Branch:** overstory/builder-metrics/overstory-5y26
- **Parent:** lead-tests-4
- **Depth:** 2

Read your task spec at the path above. It contains the full description of
what you need to build or review.

## File Scope (exclusive ownership)

You may ONLY modify the files listed below. Do not touch any other files.
If you need changes outside your scope, send mail to your parent agent
requesting the modification.

- `src/metrics/store.test.ts`
- `src/metrics/summary.test.ts`

## Expertise

Prime relevant domain knowledge before starting work:

No specific expertise domains configured

## Communication

Use `overstory mail` for all communication. Your address is **builder-metrics**.

```bash
# Check your inbox (do this regularly)
overstory mail check --agent builder-metrics

# Send a status update to your parent
overstory mail send --to lead-tests-4 --subject "status" \
  --body "Progress update here" --type status --agent builder-metrics

# Ask a question
overstory mail send --to lead-tests-4 --subject "question" \
  --body "Your question here" --type question --priority high --agent builder-metrics

# Report completion
overstory mail send --to lead-tests-4 --subject "done" \
  --body "Summary of what was done" --type result --agent builder-metrics

# Reply to a message
overstory mail reply <message-id> --body "Your reply" --agent builder-metrics
```

## Spawning Sub-Workers

You may NOT spawn sub-workers.

## Quality Gates

Before reporting completion, you MUST pass all quality gates:

1. **Tests:** `bun test` — all tests must pass
2. **Lint:** `bun run lint` — zero errors
3. **Typecheck:** `bun run typecheck` — no TypeScript errors
4. **Commit:** all changes committed to your branch (overstory/builder-metrics/overstory-5y26)
5. **Signal completion:** send `worker_done` mail to lead-tests-4: `overstory mail send --to lead-tests-4 --subject "Worker done: overstory-5y26" --body "Quality gates passed." --type worker_done --agent builder-metrics`
6. **Close issue:** `bd close overstory-5y26 --reason "summary of changes"`

Do NOT push to the canonical branch. Your work will be merged by the
orchestrator via `overstory merge`.

## Constraints

- Only modify files in your File Scope
- Commit only to your branch: overstory/builder-metrics/overstory-5y26
- Never push to the canonical branch
- Report completion via `bd close` AND `overstory mail send --type result`
- If you encounter a blocking issue, send mail with `--priority urgent --type error`
